"use strict";(self["webpackChunkkams"]=self["webpackChunkkams"]||[]).push([[247],{3636:function(t,e,s){s.d(e,{DX:function(){return h},yz:function(){return m},Ar:function(){return p},yY:function(){return d},qI:function(){return u}});const i=t=>e=>Object.keys(e).map((s=>({name:t[s],value:e[s]})));var n=i;const a={message:"累计消息收:发量",bots:"实例在线数/总数",login:"登录成功:失败次数",memory:"内存使用量"},o={type:"系统类型",arch:"CPU架构",uptime:"开机时间",hostname:"主机名称",homedir:"用户目录",node:"node版本"},c={midwares:"中间件",commands:"指令",regexps:"正则",bots:"实例",adapters:"适配器",modules:"模块"},r={"全部":"all","私聊":0,"群聊":1,"频道":2},l={"成员":0,"管理员":1,"最高管理员":2},u=n(o),h=n(a),d=n(c),p=r,m=l},4066:function(t,e,s){s.d(e,{A:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"k-sb-aside k-aside"},[e("div",[t._t("default")],2)])},n=[],a={name:"k-sb-aside"},o=a,c=s(8529),r=(0,c.A)(o,i,n,!1,null,null,null),l=r.exports},493:function(t,e,s){s.d(e,{A:function(){return h}});var i=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"k-menu",style:{flexDirection:this.mode}},[t._t("default")],2)},n=[],a=(s(381),s(4061)),o=s.n(a),c={name:"k-menu",data(){return{activeIndex:this.defaultActive}},provide(){return{root:this}},props:{activeColor:{type:String},activeShape:{type:Array,default(){return[]}},backgroundColor:{type:String},textColor:{},mode:{type:String,default(){return"column"}},defaultActive:{type:String},router:{type:Boolean}},methods:{changeRouteFn(t){this.activeIndex=t,this.router&&this.$router.push(t)}},computed:{rootMenu(){return{activeColor:this.activeColor,backgroundColor:this.backgroundColor,activeIndex:this.defaultActive}}},watch:{defaultActive(t){this.activeIndex=t}},beforeCreate(){this.$bus=new(o())},mounted(){this.$bus.$on("changeRoute",this.changeRouteFn)},beforeDestroy(){this.$bus.$off("changeRoute",this.changeRouteFn)}},r=c,l=s(8529),u=(0,l.A)(r,i,n,!1,null,"13221647",null),h=u.exports},3850:function(t,e,s){s.d(e,{A:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("el-tooltip",{ref:"tooltip",staticClass:"item",attrs:{disabled:!t.tips,effect:"dark",content:t.title,placement:"right",manual:""}},[e("li",t._g({staticClass:"k-menu-item",class:[{className:t.className},t.direction],style:[t.itemStyle,{height:`${t.height}px`,minHeight:`${t.height}px`}],on:{mouseenter:t.onmouseenterFn,mouseleave:t.onMouseLeaveFn,click:t.handleClickFn}},t.$listeners),[t.activeShape.includes("line")?[e("transition",{attrs:{appear:"",name:"appear"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"current-shape line",style:{background:t.root.activeColor}})])]:t._e(),t.activeShape.includes("circle")?[e("transition",{attrs:{appear:""}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"current-shape circle",style:[t.circleStyle]})])]:t._e(),t._t("default")],2)])},n=[],a={name:"k-menu-item",data(){return{activeColor:this.root.activeColor}},inject:["root"],props:{icon:{type:String,default(){return""}},index:{type:String},title:{type:String},width:{type:String,default(){return"70"}},height:{type:String,default(){return"70"}},className:{type:String,default(){return""}}},methods:{onmouseenterFn(){this.$el.style.backgroundColor=this.root.backgroundColor,this.handleTooltipFn(!0)},onMouseLeaveFn(){this.activeShape.includes("background")&&this.active||(this.$el.style.backgroundColor="",this.handleTooltipFn(!1))},handleClickFn(){this.root.$bus.$emit("changeRoute",this.index),this.$emit("click",this)},handleTooltipFn(t){this.$refs.tooltip.showPopper=t}},computed:{active(){if(!this.root.router)return this.root.activeIndex===this.index;const t=this.root.activeIndex.split("/"),e=this.index.split("/");return t.includes(e[1])},itemStyle(){const t={color:this.active?this.root.activeColor:this.root.textColor,borderLeftColor:this.active?this.root.activeColor:this.root.textColor,backgroundColor:""};return this.activeShape.includes("background")&&(t.backgroundColor=this.active?this.root.backgroundColor:""),t},circleStyle(){return{border:`3px solid ${this.activeColor};`,filter:`drop-shadow(0 0 4px ${this.activeColor});`}},activeShape(){return this.root.activeShape},tips(){return!!this.title},direction(){return`k-menu-item-${this.root.mode}`}},beforeMount(){},mounted(){}},o=a,c=s(8529),r=(0,c.A)(o,i,n,!1,null,"0353d388",null),l=r.exports},1247:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var i=function(){var t=this,e=t._self._c;return e("k-container",{directives:[{name:"resize-ob",rawName:"v-resize-ob",value:t.screenResize,expression:"screenResize"}]},[e("k-aside",{directives:[{name:"show",rawName:"v-show",value:t.isShowAside,expression:"isShowAside"}]},[e("header",{staticClass:"cmd-search"},[e("div",{staticClass:"cmd-search-input"},[t.isSmall?e("div",{staticClass:"cmd-search-icon icon-btn",on:{click:t.triggerPageFn}},[e("pps-icon",{attrs:{icon:"pps-icon-side-hide"}})],1):t._e(),e("pps-form",{on:{submit:function(e){return t.searchFn()}}},[e("pps-input",{staticStyle:{position:"relative"},attrs:{content:t.searchOption.searchWord,"after-clear":t.resetMenusFn},on:{"update:content":function(e){return t.$set(t.searchOption,"searchWord",e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("div",{staticClass:"cmd-search-select",on:{click:function(e){t.isShowSelect=!t.isShowSelect}}},[e("input",{staticClass:"select-label",attrs:{type:"text",readonly:""},domProps:{value:t.searchOption.category}}),e("div",{staticClass:"icon"},[e("i",{staticClass:"el-icon-arrow-down"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSelect,expression:"isShowSelect"}],staticClass:"select-dropdown"},t._l(["指令名称","快捷方式","指令别称","使用场景","权限等级"],(function(s,i){return e("div",{key:i,staticClass:"select-item",on:{click:function(e){return t.selectCategroyFn(s)}}},[t._v(" "+t._s(s)+" ")])})),0)]},proxy:!0},{key:"append",fn:function(){return[e("pps-button",{attrs:{type:"submit"}},[e("pps-icon",{attrs:{icon:"pps-icon-search"}})],1)]},proxy:!0}])})],1)],1)]),e("div",[e("k-menu",{attrs:{"default-active":t.getCurrent.name,"active-color":"#752bec","active-shape":["background"],"text-color":"#061e26","background-color":"#f0e8fd",mode:"column"}},t._l(t.menus,(function(s,i){return e("k-menu-item",{key:i,attrs:{index:s.name,width:"200",height:"40",className:""},on:{click:function(e){return t.selectCmdFn(s)}}},[e("p",[t._v(t._s(s.name))])])})),1)],1),e("div",{staticClass:"fill-empty"})]),e("main",{directives:[{name:"show",rawName:"v-show",value:t.isShowMain,expression:"isShowMain"},{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}]},[e("div",{staticClass:"cmd-config-wrapper"},[e("div",{staticClass:"cmd-config"},[e("div",{staticClass:"cmd-title"},[t.isSmall?e("span",{staticClass:"icon-btn",on:{click:t.triggerPageFn}},[e("i",{staticClass:"el-icon-back"}),e("span",[t._v(" 列表")])]):t._e(),t._v(" 指令："+t._s(t.getCurrent.name)+" ")]),e("div",{staticClass:"form-wrapper"},[e("div",{},[e("div",{staticClass:"config-item cmd-access",attrs:{inert:!1}},[e("div",{staticClass:"config-label"},[t._v("权限等级")]),e("el-radio",{attrs:{label:0},model:{value:t.config.access,callback:function(e){t.$set(t.config,"access",e)},expression:"config.access"}},[t._v("成员")]),e("el-radio",{attrs:{label:1},model:{value:t.config.access,callback:function(e){t.$set(t.config,"access",e)},expression:"config.access"}},[t._v("管理员")]),e("el-radio",{attrs:{label:2},model:{value:t.config.access,callback:function(e){t.$set(t.config,"access",e)},expression:"config.access"}},[t._v("最高管理员")])],1),e("div",{staticClass:"config-item cmd-scope",attrs:{inert:!1}},[e("div",{staticClass:"config-label"},[t._v("使用场景")]),e("el-radio",{attrs:{label:"all"},model:{value:t.config.scope,callback:function(e){t.$set(t.config,"scope",e)},expression:"config.scope"}},[t._v("所有场景")]),e("el-radio",{attrs:{label:0},model:{value:t.config.scope,callback:function(e){t.$set(t.config,"scope",e)},expression:"config.scope"}},[t._v("仅私聊")]),e("el-radio",{attrs:{label:1},model:{value:t.config.scope,callback:function(e){t.$set(t.config,"scope",e)},expression:"config.scope"}},[t._v("仅群聊")]),e("el-radio",{attrs:{label:2},model:{value:t.config.scope,callback:function(e){t.$set(t.config,"scope",e)},expression:"config.scope"}},[t._v("仅频道")])],1),e("div",{staticClass:"config-item cmd-hide"},[e("div",{staticClass:"config-label"},[t._v("是否隐藏")]),e("el-switch",{model:{value:t.config.hide,callback:function(e){t.$set(t.config,"hide",e)},expression:"config.hide"}})],1),e("div",{staticClass:"config-item cmd-shortcut"},[e("div",{staticClass:"config-label"},[t._v("快捷方式")]),e("div",{staticClass:"shortcut-wrapper"},t._l(t.config.shortcut,(function(s){return e("div",{key:s,staticClass:"tags-wrapper"},[e("el-tag",{attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.deleteShortcutTagFn(s)}}},[t._v(" "+t._s(s)+" ")])],1)})),0),e("div",{staticClass:"shortcut-form"},[t.shortcutInputVisible?e("pps-form",{on:{submit:t.saveShortcutInputFn}},[e("pps-input",{ref:"shortcutInput",staticClass:"input-new-tag",attrs:{content:t.tagInput.shortcut},on:{"update:content":function(e){return t.$set(t.tagInput,"shortcut",e)},blur:t.saveShortcutInputFn},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveShortcutInputFn.apply(null,arguments)}}}),e("input",{staticStyle:{width:"0px",height:"0px"},attrs:{type:"submit"}})],1):e("pps-button",{staticClass:"button-new-tag",staticStyle:{"boder-radius":"4px"},on:{click:t.showShortcutInputFn}},[t._v(" + 新增选项 ")])],1)]),e("div",{staticClass:"config-item cmd-shortcut"},[e("div",{staticClass:"config-label"},[t._v("别称")]),e("div",{staticClass:"shortcut-wrapper"},t._l(t.config.alias,(function(s){return e("div",{key:s,staticClass:"tags-wrapper"},[e("el-tag",{attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.deleteAliasTagFn(s)}}},[t._v(" "+t._s(s)+" ")])],1)})),0),e("div",{staticClass:"shortcut-form"},[t.aliasInputVisible?e("pps-form",{on:{submit:t.saveAliasInputFn}},[e("pps-input",{ref:"aliasInput",staticClass:"input-new-tag",attrs:{content:t.tagInput.alias},on:{"update:content":function(e){return t.$set(t.tagInput,"alias",e)}}}),e("input",{staticStyle:{width:"0px",height:"0px"},attrs:{type:"submit"}})],1):e("pps-button",{staticClass:"button-new-tag",staticStyle:{"boder-radius":"4px"},on:{click:t.showAliasInputFn}},[t._v(" + 新增选项 ")])],1)])]),e("pps-form",{staticClass:"cmd-config-submit"},[e("pps-form",{on:{submit:t.submitConfigFn,reset:t.updateCurrentFn}},[e("pps-button",{attrs:{theme:"confirm"}},[t._v("提交")]),e("pps-button",{attrs:{type:"reset"}},[t._v("重置")])],1)],1)],1)])])])],1)},n=[],a=(s(381),function(){var t=this,e=t._self._c;return e("section",{staticClass:"k-container",class:`k-container-${t.direction}`},[t._t("default")],2)}),o=[],c={name:"k-container",props:{direction:{type:String,default:"horizontal"}},computed:{}},r=c,l=s(8529),u=(0,l.A)(r,a,o,!1,null,null,null),h=u.exports,d=s(4066),p=s(3850),m=s(493),g=s(9335),f=s(3636),v=s(9610),C={name:"kCommand",components:{kContainer:h,kAside:d.A,kMenu:m.A,kMenuItem:p.A},data(){return{isShowSelect:!1,isShowAside:!0,isShowMain:!0,isSmall:!1,isLoading:!1,shortcutInputVisible:!1,aliasInputVisible:!1,menus:[],currentCommand:{},searchOption:{searchWord:"",category:"指令名称"},config:{},tagInput:{shortcut:"",alias:""}}},methods:{...(0,g.mapMutations)("command",{updateCurrent:"UPDATE_CURRENT"}),selectCmdFn(t){this.updateCurrent(t.name),this.updateCurrentFn()},searchFn(){const t=this.searchOption.searchWord,e=this.searchOption.category;if(!t)return this.resetMenus();"指令名称"===e?this.menus=this.getCmdByName(t):"快捷方式"===e?this.menus=this.getCmdByShortcut(t):"指令别称"===e?this.menus=this.getCmdByAlias(t):"使用场景"===e?this.menus=this.getCmdByScope(f.Ar[t]):"权限等级"===e&&(this.menus=this.getCmdByAccess(f.yz[t]))},resetMenusFn(){this.menus=this.getCmds,this.updateCurrent()},selectCategroyFn(t){this.isShowSelect=!1,this.searchOption.category=t},deleteShortcutTagFn(t){this.config.shortcut=this.config.shortcut.filter((e=>e!==t))},showShortcutInputFn(){this.shortcutInputVisible=!0,this.$nextTick((()=>{this.$refs.shortcutInput.$refs.input.focus()}))},saveShortcutInputFn(){console.log("emit");const t=this.tagInput.shortcut;t&&this.config.shortcut.push(t),this.shortcutInputVisible=!1,this.tagInput.shortcut=""},deleteAliasTagFn(t){this.config.alias=this.config.alias.filter((e=>e!==t))},showAliasInputFn(){this.aliasInputVisible=!0,this.$nextTick((()=>{this.$refs.aliasInput.$refs.input.focus()}))},saveAliasInputFn(){const t=this.tagInput.alias;t&&this.config.alias.push(t),this.aliasInputVisible=!1,this.tagInput.alias=""},submitConfigFn(){this.isLoading=!0,(0,v.hS)(this.getCurrent.name,this.config).then((t=>{console.log(t),this.isLoading=!1}))},resetConfigFn(){this.config=this.getCurrent.data},screenResize(t,e){const s=Math.floor(t);if(s>600)return this.isShowAside=!0,this.isShowMain=!0,void(this.isSmall=!1);this.isSmall||(this.isShowAside=!1,this.isShowMain=!0),this.isSmall=!0},triggerPageFn(){this.isShowAside=!this.isShowAside,this.isShowMain=!this.isShowMain},updateCurrentFn(){const t={access:this.getCurrent.data.access,scope:this.getCurrent.data.scope,hide:this.getCurrent.data.hide,shortcut:this.getCurrent.data.shortcut,alias:this.getCurrent.data.alias};this.config=t}},computed:{...(0,g.mapGetters)("command",["getCmds","getCmdByName","getCmdByShortcut","getCurrent","getCmdByAlias","getCmdByScope","getCmdByAccess"])},watch:{getCurrent(t){const e={access:t.data.access,scope:t.data.scope,hide:t.data.hide,shortcut:t.data.shortcut,alias:t.data.alias};this.config=e}},created(){this.menus=this.getCmds,this.updateCurrentFn()},mounted(){}},b=C,k=(0,l.A)(b,i,n,!1,null,"4bc14b95",null),y=k.exports}}]);
//# sourceMappingURL=247.21f57bad.js.map