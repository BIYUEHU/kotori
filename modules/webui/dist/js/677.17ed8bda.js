"use strict";(self["webpackChunkkams"]=self["webpackChunkkams"]||[]).push([[677],{4066:function(t,s,e){e.d(s,{A:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("aside",{staticClass:"k-sb-aside k-aside"},[s("div",[t._t("default")],2)])},a=[],n={name:"k-sb-aside"},o=n,l=e(8529),r=(0,l.A)(o,i,a,!1,null,null,null),c=r.exports},8651:function(t,s,e){e.d(s,{A:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("section",{staticClass:"k-container",class:`k-container-${t.direction}`},[t._t("default")],2)},a=[],n={name:"k-container",props:{direction:{type:String,default:"horizontal"}},computed:{}},o=n,l=e(8529),r=(0,l.A)(o,i,a,!1,null,null,null),c=r.exports},7677:function(t,s,e){e.r(s),e.d(s,{default:function(){return C}});var i=function(){var t=this,s=t._self._c;return s("el-card",{directives:[{name:"resize-ob",rawName:"v-resize-ob",value:t.cardResize,expression:"cardResize"}]},[s("k-container",[s("main",[s("pps-form",{on:{submit:t.submitFn,reset:t.resetFn}},[s("div",{staticClass:"k-list"},[s("h3",[t._v("全局配置")]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("端口：")]),s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.port,callback:function(s){t.$set(t.form,"port",s)},expression:"form.port"}})],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("命令前缀 :")]),s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form["command-prefix"],callback:function(s){t.$set(t.form,"command-prefix",s)},expression:"form['command-prefix']"}})],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("自动加载模块目录 :")]),s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.dirs[1],callback:function(s){t.$set(t.form.dirs,1,s)},expression:"form.dirs[1]"}})],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("是否使用彩色日志输出 :")]),s("el-switch",{attrs:{"active-color":"#00aeed"},model:{value:t.form.noColor,callback:function(s){t.$set(t.form,"noColor",s)},expression:"form.noColor"}})],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("日志等级 :")]),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.level,callback:function(s){t.$set(t.form,"level",s)},expression:"form.level"}},t._l(t.staticForm.level,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("语言类型 :")]),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.lang,callback:function(s){t.$set(t.form,"lang",s)},expression:"form.lang"}},t._l(t.staticForm.lang,(function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("div"),s("div",{staticClass:"btn"},[s("pps-button",{attrs:{theme:"confirm"}},[t._v("提交")]),s("pps-button",{attrs:{theme:"default",type:"reset"}},[t._v("重置")])],1)])])])]),s("pps-form",{on:{submit:function(s){return t.submitBackendFn()},reset:function(s){return t.resetBackendFn()}}},[s("div",{staticClass:"k-list"},[s("h3",[t._v("后端IP设置")]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("后端IP地址")]),s("pps-input",{staticStyle:{position:"relative"},attrs:{content:t.hostForm.host,placeholder:"无前缀后端IP地址"},on:{"update:content":function(s){return t.$set(t.hostForm,"host",s)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("div",{staticClass:"cmd-search-select",on:{click:function(s){t.isShowSelect=!t.isShowSelect}}},[s("input",{staticClass:"select-label",attrs:{type:"text",readonly:""},domProps:{value:`${t.ssl}//`}}),s("div",{staticClass:"icon"},[s("i",{staticClass:"el-icon-arrow-down"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSelect,expression:"isShowSelect"}],staticClass:"select-dropdown"},t._l(["https:","http:"],(function(e,i){return s("div",{key:i,staticClass:"select-item",on:{click:function(s){return t.selectSslFn(e)}}},[t._v(" "+t._s(`${e}//`)+" ")])})),0)]},proxy:!0}])})],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("span",[t._v("后端端口号")]),s("pps-input",{attrs:{content:t.hostForm.port,placeholder:"后端端口号"},on:{"update:content":function(s){return t.$set(t.hostForm,"port",s)}}})],1)]),s("div",{staticClass:"k-list-item"},[s("div",{staticClass:"k-list-main"},[s("div"),s("div",{staticClass:"btn"},[s("pps-button",{attrs:{theme:"confirm"}},[t._v("提交")]),s("pps-button",{attrs:{theme:"default",type:"reset"}},[t._v("重置")])],1)])])])])],1),s("k-aside")],1)],1)},a=[],n=e(2197),o=e(8651),l=e(9335),r=e(837),c=e(4066),u=e(4061);const d={data(){return{form:{"command-prefix":"",port:null,lang:null,noColor:!0,level:10,dirs:[]},staticForm:{lang:["en_US","ja_JP","zh_TW","zh_CN"],level:[{label:"TRACE",value:10},{label:"DEBUG",value:20},{label:"RECORD",value:25},{label:"INFO",value:30},{label:"WARN",value:40},{label:"ERROR",value:50},{label:"FATAL",value:60},{label:"SILENT",value:70}],dirs:[]},hostForm:{host:"",port:"",wsHost:""},isLoading:!1,isShowSelect:!1,ssl:"https:",listWidth:0,isPadding:1}},components:{kContainer:o.A,kAside:c.A},methods:{...(0,l.mapMutations)("layoutOption",["updateHost","updatePort","updateWsHost"]),async getConfig(){const{data:t}=await(0,n.gg)();this.form={...this.form,...t}},async submitFn(){(0,n.n6)(this.form).then((t=>{204===t.status?this.$message.success("修改成功！"):this.$message.error("修改失败！")}))},resetFn(){this.getConfig(),this.$message.info("已重置！")},updataBackendConfigFn(){const t="https:"===this.ssl,s=this.hostForm.port||t?443:80,e=(t?"wss://":"ws://")+this.hostForm.host,i=this.ssl+"//"+this.hostForm.host;this.updateHost(i),this.updatePort(s),this.updateWsHost(e),(0,r.c)(this.$store),this.mountBackendConfigFn(),this.$message.success("修改成功！")},mountBackendConfigFn(){this.hostForm.host=this.host.replace(/^(https?:\/\/)/,""),this.hostForm.port=this.port},submitBackendFn(){const t=window.location.protocol,s="https:"===t&&t!==this.ssl;if(s)return this.$confirm("配置与当前页面协议不一致, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.updataBackendConfigFn()})).catch((()=>{this.$message({type:"info",message:"已取消修改"})}));this.updataBackendConfigFn()},resetBackendFn(){this.configForm={host:this.host,port:this.port,wsHost:this.wsHost},this.$message.info("已重置！")},selectSslFn(t){this.isShowSelect=!1,this.ssl=t},cardResize(t,s){Math.floor(t)<=700?(this.listWidth=100,this.isPadding=0):(this.listWidth=90,this.isPadding=1)}},computed:{...(0,l.mapState)("layoutOption",["host","port","wsHost"])},mounted(){this.getConfig(),this.mountBackendConfigFn()}},m=()=>{(0,u.useCssVars)(((t,s)=>({"15eb4096":t.isPadding})))},p=d.setup;d.setup=p?(t,s)=>(m(),p(t,s)):m;var h=d,v=h,f=e(8529),k=(0,f.A)(v,i,a,!1,null,"0c51900e",null),C=k.exports}}]);
//# sourceMappingURL=677.17ed8bda.js.map