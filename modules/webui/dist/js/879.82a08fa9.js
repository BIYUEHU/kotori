"use strict";(self["webpackChunkkams"]=self["webpackChunkkams"]||[]).push([[879],{879:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.isEmpty,expression:"isEmpty"},{name:"resize-ob",rawName:"v-resize-ob",value:e.cardResize,expression:"cardResize"}]},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"},{name:"resize-ob",rawName:"v-resize-ob",value:e.handleSizeChange,expression:"handleSizeChange"}],staticStyle:{width:"100%","font-size":"13px"},attrs:{fit:"",border:"",stripe:"",data:e.bots,height:e.tableHeight}},[t("el-table-column",{attrs:{prop:"identity",label:"ID",sortable:"",align:"center"}}),t("el-table-column",{attrs:{prop:"platform",label:"聊天平台",align:"center"}}),t("el-table-column",{attrs:{prop:"id",label:"平台ID",align:"center"}}),e.isChangeTable?e._e():[t("el-table-column",{attrs:{prop:"id",label:"连接时间","min-width":"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("span",{directives:[{name:"trans-time",rawName:"v-trans-time",value:e.row.status.createTime,expression:"scope.row.status.createTime"}]})]}}],null,!1,1676180278)}),t("el-table-column",{attrs:{prop:"id",label:"上次发送消息时间","min-width":"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("span",{directives:[{name:"trans-time",rawName:"v-trans-time",value:e.row.status.lastMsgTime,expression:"scope.row.status.lastMsgTime"}]})]}}],null,!1,13296118)}),t("el-table-column",{attrs:{prop:"status.receivedMsg",label:"接收信息数",align:"center",sortable:""}}),t("el-table-column",{attrs:{prop:"status.sentMsg",label:"发送信息数",align:"center",sortable:""}}),t("el-table-column",{attrs:{prop:"status.offlineTimes",label:"下线次数",align:"center"}}),t("el-table-column",{attrs:{label:"在线状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("pps-icon",{attrs:{icon:`pps-icon-${e.row.status.value}`}})]}}],null,!1,3960529212)}),t("el-table-column",{attrs:{prop:"lang",label:"使用语言",align:"center"}})],t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("pps-button",{attrs:{theme:"text"},on:{click:function(t){return e.handleViewDetails(a.row)}}},[e._v("详情")]),t("pps-button",{attrs:{theme:"text"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")])]}}])})],2),t("pps-dialog",{attrs:{show:e.isShowDetailsDialog,title:e.viewDetailsData.title},on:{"update:show":function(t){e.isShowDetailsDialog=t}}},[t("template",{slot:"content"},[t("el-descriptions",{attrs:{direction:"vertical",column:4,border:""}},[t("el-descriptions-item",{attrs:{label:"上次发送消息时间"}},[t("span",{directives:[{name:"trans-time",rawName:"v-trans-time",value:e.viewDetailsData.content.status.lastMsgTime,expression:"viewDetailsData.content.status.lastMsgTime"}]})]),t("el-descriptions-item",{attrs:{label:"接收信息数",span:2}},[e._v(" "+e._s(e.viewDetailsData.content.status.receivedMsg)+" ")]),t("el-descriptions-item",{attrs:{label:"发送信息数"}},[e._v(" "+e._s(e.viewDetailsData.content.status.sentMsg)+" ")]),t("el-descriptions-item",{attrs:{label:"连接时间"}},[t("span",{directives:[{name:"trans-time",rawName:"v-trans-time",value:e.viewDetailsData.content.status.createTime,expression:"viewDetailsData.content.status.createTime"}]})]),t("el-descriptions-item",{attrs:{label:"在线状态"}},["online"===e.viewDetailsData.content.status.value?t("span",[t("pps-icon",{attrs:{icon:"pps-icon-online"}}),e._v(" 在线 ")],1):t("span",[t("pps-icon",{attrs:{icon:"pps-icon-offline"}}),e._v(" 离线 ")],1)]),t("el-descriptions-item",{attrs:{label:"下线次数"}},[e._v(" "+e._s(e.viewDetailsData.content.status.offlineTimes)+" ")])],1)],1)],2),t("pps-dialog",{attrs:{show:e.isShowEditDialog,title:e.editDialogData.id},on:{confirmed:e.updateConfigFn,"update:show":function(t){e.isShowEditDialog=t}}},[t("template",{slot:"content"},[t("vue-form",{attrs:{"ui-schema":e.uiSchema,schema:e.editDialogData.schema},model:{value:e.editDialogData.origin,callback:function(t){e.$set(e.editDialogData,"origin",t)},expression:"editDialogData.origin"}},[t("template",{slot:"default"},[t("span")])],2)],1),t("template",{slot:"footer"})],2)],1)},s=[],l=a(9610),n={name:"botsPage",data(){return{bots:[],isEmpty:!0,isChangeTable:!1,isShowDetailsDialog:!1,isShowEditDialog:!1,isLoading:!1,tableHeight:0,viewDetailsData:{title:"提示",content:{identity:"",platform:"",id:"",lang:"",status:{createTime:"",lastMsgTime:"",receivedMsg:"",sentMsg:"",offlineTimes:"",value:""}}},editDialogData:{id:"",origin:{},schema:{}},schema:{type:"object",required:["userName","age"],properties:{userName:{type:"string",title:"用户名",default:"Liu.Jun"},age:{type:"number",title:"年龄"},bio:{type:"string",title:"签名",minLength:10,default:"知道的越多、就知道的越少"}}},uiSchema:{bio:{"ui:options":{placeholder:"请输入你的签名",type:"textarea",rows:1}}}}},methods:{handleViewDetails(e){this.handleDialogMask((()=>{this.viewDetailsData.content=e,this.viewDetailsData.title=e.identity}))},handleEdit(e){this.handleDialogMask((async()=>{const{data:t}=await(0,l.zr)(e.identity);this.editDialogData.id=t.id,this.editDialogData.origin=t.origin,this.editDialogData.schema=t.schema}),!0)},updateConfigFn(){const e=this.editDialogData.origin;(0,l.cH)(this.editDialogData.id,e).then((e=>204===e.status?this.$message({message:"更新成功！",type:"success"}):this.$message({message:"更新失败！",type:"error"}))).then((()=>{this.editDialogData.origin={},this.editDialogData.schema={}}))},async handleDialogMask(e,t=!1){this.isLoading=!0,await e(),this.isLoading=!1,t?this.isShowEditDialog=!0:this.isShowDetailsDialog=!0},handleSizeChange(e,t){this.isChangeTable=e<450},cardResize(e,t){this.tableHeight=Math.floor(t)-40}},computed:{},mounted(){(0,l.Nb)().then((e=>{this.isEmpty=!1,this.bots=e.data}))}},o=n,r=a(8529),c=(0,r.A)(o,i,s,!1,null,"12d25856",null),d=c.exports}}]);
//# sourceMappingURL=879.82a08fa9.js.map